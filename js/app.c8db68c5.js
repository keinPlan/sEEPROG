(function(){"use strict";var e={4846:function(e,r,t){var o=t(9242),n=t(3396),a=t(7718),i=t(9271);function l(e,r,t,o,l,s){const u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(a.q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i.O,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1})])),_:1})}var s=(0,n.aZ)({name:"App",data(){return{}}}),u=t(89);const f=(0,u.Z)(s,[["render",l]]);var d=f,c=t(2483),m=t(7139),h=t(7771),p=t(588),E=t(1556),g=t(702),v=t(2448),w=t(6572),y=t(4789),b=t(1334),R=t(1666),C=t(3369),B=t(8521),k=t(6824),S=t(73),W=t(165),O=t(4842);function _(e,r,t,o,a,i){return(0,n.wg)(),(0,n.j4)(C.K,{class:"fill-height",fluid:""},{default:(0,n.w5)((()=>[(0,n.Wm)(p.L,null,{default:(0,n.w5)((()=>[o.seeprogConnection?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(g.T,{key:0,onClick:r[0]||(r[0]=e=>o.connect()),variant:"tonal",icon:"mdi-power-plug",color:"primary"})),o.seeprogConnection?((0,n.wg)(),(0,n.j4)(g.T,{key:1,onClick:r[1]||(r[1]=e=>o.disconnect()),variant:"tonal",icon:"mdi-power-plug-off",color:"red"})):(0,n.kq)("",!0),(0,n.Wm)(E.o,null,{default:(0,n.w5)((()=>[(0,n.Uk)("sEEProg")])),_:1})])),_:1}),(0,n.Wm)(S.yc,{modelValue:o.overlay,"onUpdate:modelValue":r[3]||(r[3]=e=>o.overlay=e),width:"100%",height:"100%",class:"align-center justify-center",contained:""},{default:(0,n.w5)((()=>[(0,n.Wm)(v._,{class:"ma-5 pa-5"},{default:(0,n.w5)((()=>[(0,n.Wm)(w.E,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,m.zw)(o.commandResult?.msg),1)])),_:1}),(0,n.Wm)(O.z,{label:"Details",rows:"20","model-value":o.commandResult?.detail},null,8,["model-value"]),(0,n.Wm)(g.T,{color:"orange lighten-2",onClick:r[2]||(r[2]=e=>o.overlay=!o.overlay),block:""},{default:(0,n.w5)((()=>[(0,n.Uk)("Close")])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(B.D,null,{default:(0,n.w5)((()=>[o.seeprogConnection?((0,n.wg)(),(0,n.j4)(k.o,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(B.D,{class:"d-flex mb-8"},{default:(0,n.w5)((()=>[(0,n.Wm)(O.z,{label:"EEPROM DATA:",rows:"20","auto-grow:false":"","no-resize":"","model-value":o.eepromData,"onUpdate:model-value":r[4]||(r[4]=e=>o.eepromData=e)},null,8,["model-value"])])),_:1}),(0,n.Wm)(B.D,{class:"mb-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(k.o,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v._,{class:"ma-2 mb-6"},{default:(0,n.w5)((()=>[(0,n.Wm)(w.E,null,{default:(0,n.w5)((()=>[(0,n.Uk)("EEprom Config")])),_:1}),(0,n.Wm)(y._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W.hw,{label:"ClockSpeed[Hz]",type:"number",modelValue:o.eepromConfig.ClockSpeedHz,"onUpdate:modelValue":r[5]||(r[5]=e=>o.eepromConfig.ClockSpeedHz=e),modelModifiers:{number:!0}},null,8,["modelValue"]),(0,n.Wm)(W.hw,{label:"eepromBusAddress",type:"number",modelValue:o.eepromConfig.EEpromBusAddress,"onUpdate:modelValue":r[6]||(r[6]=e=>o.eepromConfig.EEpromBusAddress=e),modelModifiers:{number:!0}},null,8,["modelValue"]),(0,n.Wm)(W.hw,{label:"eerpomAddressSize",type:"number",modelValue:o.eepromConfig.EEpromAddressSize,"onUpdate:modelValue":r[7]||(r[7]=e=>o.eepromConfig.EEpromAddressSize=e),modelModifiers:{number:!0}},null,8,["modelValue"]),(0,n.Wm)(W.hw,{label:"eerpomWriteBufferSize",type:"number",modelValue:o.eepromConfig.EEpromWriteBufferSize,"onUpdate:modelValue":r[8]||(r[8]=e=>o.eepromConfig.EEpromWriteBufferSize=e),modelModifiers:{number:!0}},null,8,["modelValue"]),(0,n.Wm)(W.hw,{label:"EEpromWriteDelay",type:"number",modelValue:o.eepromConfig.EEpromWriteDelay,"onUpdate:modelValue":r[9]||(r[9]=e=>o.eepromConfig.EEpromWriteDelay=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(b.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g.T,{block:"",color:"primary",variant:"tonal",onClick:o.setEEpromConfig},{default:(0,n.w5)((()=>[(0,n.Uk)("SET")])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,n.Wm)(v._,{class:"ma-2 mb-6"},{default:(0,n.w5)((()=>[(0,n.Wm)(w.E,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Read/Write")])),_:1}),(0,n.Wm)(y._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W.hw,{label:"Address",type:"number",modelValue:o.rwAddress,"onUpdate:modelValue":r[10]||(r[10]=e=>o.rwAddress=e),modelModifiers:{number:!0}},null,8,["modelValue"]),(0,n.Wm)(W.hw,{label:"ByteCount",type:"number",modelValue:o.rwByteCount,"onUpdate:modelValue":r[11]||(r[11]=e=>o.rwByteCount=e),modelModifiers:{number:!0}},null,8,["modelValue"]),(0,n.Wm)(W.hw,{label:"writeTimout",type:"number",modelValue:o.writeTimout,"onUpdate:modelValue":r[12]||(r[12]=e=>o.writeTimout=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(b.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g.T,{color:"primary",variant:"tonal",onClick:o.readEEprom},{default:(0,n.w5)((()=>[(0,n.Uk)("Read")])),_:1},8,["onClick"]),(0,n.Wm)(g.T,{color:"primary",variant:"tonal",onClick:o.writeEEprom},{default:(0,n.w5)((()=>[(0,n.Uk)("Write")])),_:1},8,["onClick"]),(0,n.Wm)(g.T,{color:"primary",variant:"tonal",onClick:o.verifyEEprom},{default:(0,n.w5)((()=>[(0,n.Uk)("Verify")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(R.c,{app:"",bottom:"",absolute:"",padless:""},{default:(0,n.w5)((()=>[o.commandResult?((0,n.wg)(),(0,n.j4)(h.w,{key:0,type:o.commandResult.isError?"error":"success"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,m.zw)(o.commandResult.msg),1)])),_:1},8,["type"])):(0,n.kq)("",!0)])),_:1})])),_:1})])),_:1})}var A=t(7327);class I{constructor(){(0,A.Z)(this,"buffer",new Uint8Array(1024)),(0,A.Z)(this,"index",0),(0,A.Z)(this,"sofChar",119),(0,A.Z)(this,"dleChar",136),(0,A.Z)(this,"eofChar",153),(0,A.Z)(this,"IsReceiveMode",!1)}get bytesInBuffer(){return this.index}addInt8(e){e&=255,this.IsReceiveMode||e!=this.sofChar&&e!=this.dleChar&&e!=this.eofChar||(this.buffer[this.index++]=this.dleChar),this.buffer[this.index++]=e}addInt16(e){this.addInt8(e>>0),this.addInt8(e>>8)}addInt32(e){this.addInt8(e>>0),this.addInt8(e>>8),this.addInt8(e>>16),this.addInt8(e>>24)}addInt8Array(e){e.forEach((e=>this.addInt8(e)))}startPacket(){this.IsReceiveMode=!1,this.index=0,this.buffer[this.index++]=this.sofChar>>0&255}finishPacket(){return this.buffer[this.index++]=this.eofChar>>0&255,this.buffer.slice(0,this.index)}startReceive(){this.index=0,this.IsReceiveMode=!0}getData(e,r){return this.buffer.slice(e,e+r)}ResetIndex(){this.index=0}}class D{constructor(e){(0,A.Z)(this,"port",void 0),(0,A.Z)(this,"writer",void 0),(0,A.Z)(this,"transferBuffer",new I),this.port=e,this.writer=this.port.writable?.getWriter()}close(){this.writer?.releaseLock(),this.port.close()}async ReadEEprom(e,r){let t=512,o=0;const n=new Uint8Array(r);while(r-o>0)r-o<t&&(t=r-o),await this.readEEprom(e+o,t).then((e=>e.forEach((e=>n[o++]=e))));return n}async readEEprom(e,r){console.log(`ReadEEprom : ${e.toString(16)} ${r}`),this.transferBuffer.startPacket(),this.transferBuffer.addInt8("R".charCodeAt(0)),this.transferBuffer.addInt32(e),this.transferBuffer.addInt32(r);const t=this.transferBuffer.finishPacket();console.log("SEND: ",t),await(this.writer?.write(t)),this.transferBuffer.startReceive();let o=-1;const n=new Uint8Array(r);let a=0;do{await this.ReadDataFromSerial();const r=this.transferBuffer.bytesInBuffer;if(0!=r){if(-1==o){if(o=this.transferBuffer.getData(0,1)[0],0!=o)throw console.log(`ERROR ${o}`,this.transferBuffer.getData(0,this.transferBuffer.bytesInBuffer)),`ReadEEprom Error: ${o} Address: ${e.toString(16)}`;this.transferBuffer.getData(1,r-1).forEach((e=>n[a++]=e))}else this.transferBuffer.getData(0,r).forEach((e=>n[a++]=e));this.transferBuffer.ResetIndex()}}while(a<r);return console.log("INC: ",n),n}async WriterEEprom(e,r,t){let o=512,n=0;const a=r.length;while(a-n>0)a-n<o&&(o=a-n),await this.writerEEprom(e+n,r.slice(n,n+o),t),n+=o}async writerEEprom(e,r,t){this.transferBuffer.startPacket(),this.transferBuffer.addInt8("W".charCodeAt(0)),this.transferBuffer.addInt32(e),this.transferBuffer.addInt32(r.length),this.transferBuffer.addInt8Array(r);const o=this.transferBuffer.finishPacket();console.log("SEND: ",o),await(this.writer?.write(o)),this.transferBuffer.startReceive();let n=-1;do{await this.ReadDataFromSerial(t);const e=this.transferBuffer.bytesInBuffer;if(0!=e&&(n=this.transferBuffer.getData(0,1)[0],0!=n))throw`writerEEprom ERROR: ${n}`}while(-1==n)}async SetConfig(e){console.log("SetConfig :",e),this.transferBuffer.startPacket(),this.transferBuffer.addInt8("S".charCodeAt(0)),this.transferBuffer.addInt32(e.ClockSpeedHz),this.transferBuffer.addInt8(e.EEpromBusAddress),this.transferBuffer.addInt16(e.EEpromAddressSize),this.transferBuffer.addInt16(e.EEpromWriteBufferSize),this.transferBuffer.addInt32(e.EEpromWriteDelay);const r=this.transferBuffer.finishPacket();if(console.log("SEND: ",r),await(this.writer?.write(r)),this.transferBuffer.startReceive(),await this.ReadDataFromSerial(),0!=this.transferBuffer.bytesInBuffer){const e=this.transferBuffer.getData(0,1)[0];if(0==e)return;throw console.log(`ERROR ${e}`,this.transferBuffer.getData(0,this.transferBuffer.bytesInBuffer)),`SetConfig Error: ${e}`}}async ReadDataFromSerial(e=1e3){const r=this.port.readable?.getReader(),t=setTimeout((()=>{throw r?.releaseLock(),"Timeout"}),e);await(r?.read().then((e=>e.value?this.transferBuffer.addInt8Array(e.value):()=>console.log("timeout"))).finally((()=>r?.releaseLock()))),clearTimeout(t)}}var V=t(4870),j={setup(){const e=(0,V.iH)(null),r=(0,V.iH)(null),t=(0,V.iH)(!1),o=(0,V.iH)(1e3),n=(0,V.iH)(""),a=(0,V.iH)({ClockSpeedHz:4e5,EEpromAddressSize:2,EEpromBusAddress:160,EEpromWriteBufferSize:64,EEpromWriteDelay:10}),i=(0,V.iH)(0),l=(0,V.iH)(10);function s(){e.value?.close(),e.value=null}async function u(){var t=navigator.serial;let o;if(o=await t.requestPort().then((e=>o=e)).catch((e=>(r.value={msg:e,isError:!0},null))),o){await o.open({baudRate:115200,dataBits:8,stopBits:1,bufferSize:8192});var n=new D(o);n.SetConfig(a.value).then((t=>{r.value={msg:"SetEEpromConfig: OK",isError:!1},e.value=n})).catch((t=>{r.value={msg:"SetEEpromConfig ERROR => wrong port selected?",isError:!0},n.close(),e.value=null}))}}async function f(){await(e.value?.SetConfig(a.value).then((e=>r.value={msg:"SetEEpromConfig: OK",isError:!1})).catch((e=>r.value={msg:"SetEEpromConfig ERROR => "+e,isError:!0})))}async function d(){n.value="";var t=i.value,o=l.value;e.value?.ReadEEprom(t,o).then((e=>{n.value+=Array.from(e,(e=>e.toString(16).toLocaleUpperCase().padStart(2,"0"))).join(" ")+" ",r.value={msg:"ReadEEprom: OK",isError:!1}})).catch((e=>r.value={msg:"ReadEEprom ERROR => "+e,isError:!0}))}async function c(){r.value=null;var t=h(),n=i.value,a=l.value;if(!t)return void(r.value={msg:"ERROR: readData undefined",isError:!0});if(t.length!=a)return void(r.value={msg:"ERROR: data.length != bCount",isError:!0});if(!e.value)return void(r.value={msg:"ERROR: !seeprog",isError:!0});let s=await e.value.WriterEEprom(n,t,o.value).then((e=>({msg:"writeEEprom OK ",isError:!1}))).catch((e=>({msg:"writeEEprom ERROR => "+e,isError:!0})));r.value=s}async function m(){r.value=null;var o=h(),n=i.value,a=l.value,s={msg:"VerifyEEprom => Missmatch !!!",isError:!1,detail:""},u=await(e.value?.ReadEEprom(n,a));if(u)if(u.length==o.length){for(let e=0;e<u.length;e++)u[e]!=o[e]&&(s.isError=!0,s.detail+=`data missmatch => add:0x${(n+e).toString(16).padStart(4,"0")} E:0x${o[e].toString(16).padStart(2,"0")} C:0x${u[e].toString(16).padStart(2,"0")}\n`,console.log(`data missmatch => add:0x${(n+e).toString(16).padStart(4,"0")} E:0x${o[e].toString(16).padStart(2,"0")} C:0x${u[e].toString(16).padStart(2,"0")}`));s.isError?s.msg="VerifyEEprom => Missmatch !!!":s.msg="VerifyEEprom => OK",r.value=s,t.value=s.isError}else r.value={msg:"ERROR: currentData.length != expecteddata.length",isError:!0};else r.value={msg:"ERROR: readData undefined",isError:!0}}function h(){var e=n.value;if(e=e.replaceAll(" ","").replaceAll("\n","").replaceAll("\r",""),e.length%2!=0)throw r.value={msg:"Error parse EEPROM DATA",isError:!0},"Error parse EEPROM DATA";var t=new Uint8Array(e.length/2),o=0,a=0;for(let r=0;r<t.length;r++)o=2*r,a+=2,t[r]=Number.parseInt(e.slice(o,a),16);return t}return{writeTimout:o,overlay:t,setEEpromConfig:f,readEEprom:d,writeEEprom:c,verifyEEprom:m,connect:u,disconnect:s,eepromData:n,commandResult:r,seeprogConnection:e,eepromConfig:a,rwAddress:i,rwByteCount:l}}};const U=(0,u.Z)(j,[["render",_]]);var x=U;const T=[{path:"/",name:"home",component:x}],M=(0,c.p7)({history:(0,c.r5)(),routes:T});var P=M,z=(t(9773),t(8957)),$=(0,z.Rd)();async function H(){const e=await t.e(461).then(t.t.bind(t,3657,23));e.load({google:{families:["Ubuntu Mono:100,300,400,500,700,900&display=swap"]}})}H(),(0,o.ri)(d).use(P).use($).mount("#app")}},r={};function t(o){var n=r[o];if(void 0!==n)return n.exports;var a=r[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(r,o,n,a){if(!o){var i=1/0;for(f=0;f<e.length;f++){o=e[f][0],n=e[f][1],a=e[f][2];for(var l=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[s])}))?o.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(f--,1);var u=n();void 0!==u&&(r=u)}}return r}a=a||0;for(var f=e.length;f>0&&e[f-1][2]>a;f--)e[f]=e[f-1];e[f]=[o,n,a]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){var e,r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if("object"===typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&"function"===typeof o.then)return o}var a=Object.create(null);t.r(a);var i={};e=e||[null,r({}),r([]),r(r)];for(var l=2&n&&o;"object"==typeof l&&!~e.indexOf(l);l=r(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return o[e]}}));return i["default"]=function(){return o},t.d(a,i),a}}(),function(){t.d=function(e,r){for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(r,o){return t.f[o](e,r),r}),[]))}}(),function(){t.u=function(e){return"js/webfontloader.796ef07d.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={},r="seeprog:";t.l=function(o,n,a,i){if(e[o])e[o].push(n);else{var l,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),f=0;f<u.length;f++){var d=u[f];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==r+a){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,t.nc&&l.setAttribute("nonce",t.nc),l.setAttribute("data-webpack",r+a),l.src=o),e[o]=[n];var c=function(r,t){l.onerror=l.onload=null,clearTimeout(m);var n=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((function(e){return e(t)})),r)return r(t)},m=setTimeout(c.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=c.bind(null,l.onerror),l.onload=c.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.f.j=function(r,o){var n=t.o(e,r)?e[r]:void 0;if(0!==n)if(n)o.push(n[2]);else{var a=new Promise((function(t,o){n=e[r]=[t,o]}));o.push(n[2]=a);var i=t.p+t.u(r),l=new Error,s=function(o){if(t.o(e,r)&&(n=e[r],0!==n&&(e[r]=void 0),n)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+r+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,n[1](l)}};t.l(i,s,"chunk-"+r,r)}},t.O.j=function(r){return 0===e[r]};var r=function(r,o){var n,a,i=o[0],l=o[1],s=o[2],u=0;if(i.some((function(r){return 0!==e[r]}))){for(n in l)t.o(l,n)&&(t.m[n]=l[n]);if(s)var f=s(t)}for(r&&r(o);u<i.length;u++)a=i[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(f)},o=self["webpackChunkseeprog"]=self["webpackChunkseeprog"]||[];o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(4846)}));o=t.O(o)})();
//# sourceMappingURL=app.c8db68c5.js.map